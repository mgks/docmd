
const templates = {
  "layout.ejs": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <%- metaTagsHtml || '' %> <%# SEO Plugin Meta Tags %>\n\n    <title><%= pageTitle %> : <%= siteTitle %></title>\n    <% if (description && !(metaTagsHtml && metaTagsHtml.includes('name=\"description\"'))) { %>\n      <meta name=\"description\" content=\"<%= description %>\">\n    <% } %>\n\n    <%- faviconLinkHtml || '' %> <%# Favicon %>\n\n    <!-- Define Default Mode (Variable for script) -->\n    <script>\n      window.DOCMD_DEFAULT_MODE = \"<%= defaultMode %>\";\n    </script>\n\n    <!-- Highlight.js Theme -->\n    <% if (config.theme?.codeHighlight !== false) { %>\n        <link rel=\"stylesheet\" id=\"highlight-theme\" href=\"<%= relativePathToRoot %>assets/css/docmd-highlight-<%= defaultMode === 'dark' ? 'dark' : 'light' %>.css\" data-base-href=\"<%= relativePathToRoot %>assets/css/\">\n    <% } %>\n\n    <!-- Main Theme -->\n    <link rel=\"stylesheet\" href=\"<%= relativePathToRoot %>assets/css/docmd-main.css\">\n    \n    <%- themeCssLinkHtml || '' %> <%# For theme.name specific CSS %>\n\n    <% (customCssFiles || []).forEach(cssFile => { %>\n      <link rel=\"stylesheet\" href=\"<%= relativePathToRoot %><%- cssFile.startsWith('/') ? cssFile.substring(1) : cssFile %>\">\n    <% }); %>\n\n    <%- pluginStylesHtml || '' %> <%# Plugin specific CSS %>\n\n    <!-- This checks storage and updates HTML attr + Highlight CSS before final paint -->\n    <%- themeInitScript %>\n\n    <%- pluginHeadScriptsHtml || '' %> <%# Plugin specific head scripts %>\n</head>\n<body class=\"<%= sidebarConfig.collapsible ? 'sidebar-collapsible' : 'sidebar-not-collapsible' %>\"\n    data-default-collapsed=\"<%= sidebarConfig.defaultCollapsed %>\"\n    data-copy-code-enabled=\"<%= config.copyCode === true %>\">\n    <aside class=\"sidebar\">\n        <div class=\"sidebar-header\">\n        <% if (logo && logo.light && logo.dark) { %>\n            <a href=\"<%= logo.href || relativePathToRoot %>\" class=\"logo-link\">\n                <img src=\"<%= relativePathToRoot %><%- logo.light.startsWith('/') ? logo.light.substring(1) : logo.light %>\" alt=\"<%= logo.alt || siteTitle %>\" class=\"logo-light\" <% if (logo.height) { %>style=\"height: <%= logo.height %>;\"<% } %>>\n                <img src=\"<%= relativePathToRoot %><%- logo.dark.startsWith('/') ? logo.dark.substring(1) : logo.dark %>\" alt=\"<%= logo.alt || siteTitle %>\" class=\"logo-dark\" <% if (logo.height) { %>style=\"height: <%= logo.height %>;\"<% } %>>\n            </a>\n        <% } else { %>\n            <h1><a href=\"<%= relativePathToRoot %>index.html\"><%= siteTitle %></a></h1>\n        <% } %>\n            <span class=\"mobile-view sidebar-menu-button float-right\">\n                <%- renderIcon(\"ellipsis-vertical\") %>\n            </span>\n        </div>\n        <%- navigationHtml %>\n        <% if (theme && theme.enableModeToggle && theme.positionMode !== 'top') { %>\n          <button id=\"theme-toggle-button\" aria-label=\"Toggle theme\" class=\"theme-toggle-button\">\n            <%- renderIcon('sun', { class: 'icon-sun' }) %>\n            <%- renderIcon('moon', { class: 'icon-moon' }) %>\n          </button>\n        <% } %>\n    </aside>\n    <div class=\"main-content-wrapper\">\n        <div class=\"page-header\">\n            <div class=\"header-left\">\n                <% if (sidebarConfig.collapsible) { %>\n                <button id=\"sidebar-toggle-button\" class=\"sidebar-toggle-button\" aria-label=\"Toggle Sidebar\">\n                    <%- renderIcon('panel-left-close') %>\n                </button>\n                <% } %>\n                <h1><%= pageTitle %></h1>\n            </div>\n            <% if (theme && theme.enableModeToggle && theme.positionMode === 'top') { %>\n            <div class=\"header-right\">\n                <% if (config.search !== false) { %>\n                <button class=\"docmd-search-trigger\" aria-label=\"Search\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-search-icon lucide-search\"><path d=\"m21 21-4.34-4.34\"></path><circle cx=\"11\" cy=\"11\" r=\"8\"></circle></svg>\n                    <span class=\"search-label\">Search</span>\n                    <span class=\"search-keys\">\n                        <kbd class=\"docmd-kbd\">⌘</kbd><kbd class=\"docmd-kbd\">k</kbd>\n                    </span>\n                </button>\n                <% } %>\n                <button id=\"theme-toggle-button\" aria-label=\"Toggle theme\" class=\"theme-toggle-button theme-toggle-header\">\n                    <%# renderIcon is available in the global EJS scope from html-generator %>\n                    <%- renderIcon('sun', { class: 'icon-sun' }) %>\n                    <%- renderIcon('moon', { class: 'icon-moon' }) %>\n                </button>\n            </div>\n            <% } %>\n        </div>\n        <main class=\"content-area\">\n            <div class=\"content-layout\">\n                <div class=\"main-content\">\n                    <%- content %>\n                    \n                    <% if (config.pageNavigation && (prevPage || nextPage)) { %>\n                    <div class=\"page-navigation\">\n                        <% if (prevPage) { %>\n                        <a href=\"<%= prevPage.url %>\" class=\"prev-page\">\n                            <%- renderIcon('arrow-left', { class: 'page-nav-icon' }) %>\n                            <span>\n                                <small>Previous</small>\n                                <strong><%= prevPage.title %></strong>\n                            </span>\n                        </a>\n                        <% } else { %>\n                        <div class=\"prev-page-placeholder\"></div>\n                        <% } %>\n                        \n                        <% if (nextPage) { %>\n                        <a href=\"<%= nextPage.url %>\" class=\"next-page\">\n                            <span>\n                                <small>Next</small>\n                                <strong><%= nextPage.title %></strong>\n                            </span>\n                            <%- renderIcon('arrow-right', { class: 'page-nav-icon' }) %>\n                        </a>\n                        <% } else { %>\n                        <div class=\"next-page-placeholder\"></div>\n                        <% } %>\n                    </div>\n                    <% } %>\n                </div>\n                \n                <!-- DEBUG: <%- JSON.stringify({headingsLength: headings ? headings.length : 0}) %> -->\n                \n                <!-- TOC sidebar -->\n                <div class=\"toc-sidebar\">\n                    <%- include('toc', { content, headings, navigationHtml, isActivePage }) %>\n                </div>\n            </div>\n\n            <!-- Page footer actions -->\n            <div class=\"page-footer-actions\">\n                <% if (locals.editUrl) { %>\n                    <a href=\"<%= editUrl %>\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"edit-link\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-pencil\"><path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\"/><path d=\"m15 5 4 4\"/></svg>\n                        <%= editLinkText %>\n                    </a>\n                <% } %>\n\n                <% if (locals.lastUpdated) { %>\n                    <!-- Placeholder for future Last Updated feature -->\n                <% } %>\n            </div>\n        </main>\n\n        <footer class=\"page-footer\">\n            <div class=\"footer-content\">\n                <div class=\"user-footer\">\n                    <%- footerHtml || '' %>\n                </div>\n                <div class=\"branding-footer\">\n                    Build with <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"></path><path d=\"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66\"></path><path d=\"m18 15-2-2\"></path><path d=\"m15 18-2-2\"></path></svg> <a href=\"https://github.com/mgks/docmd\" target=\"_blank\" rel=\"noopener\">docmd.</a>\n                </div>\n            </div>\n        </footer>\n    </div>\n\n    <% if (config.search !== false) { %>\n    <!-- Search Modal -->\n    <div id=\"docmd-search-modal\" class=\"docmd-search-modal\" style=\"display: none;\">\n        <div class=\"docmd-search-box\">\n            <div class=\"docmd-search-header\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.25em\" height=\"1.25em\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-search-icon lucide-search\"><path d=\"m21 21-4.34-4.34\"></path><circle cx=\"11\" cy=\"11\" r=\"8\"></circle></svg>\n                <input type=\"text\" id=\"docmd-search-input\" placeholder=\"Search documentation...\" autocomplete=\"off\" spellcheck=\"false\">\n                <button onclick=\"window.closeDocmdSearch()\" class=\"docmd-search-close\" aria-label=\"Close search\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"2em\" height=\"2em\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-x-icon lucide-x\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg>\n                </button>\n            </div>\n            <div id=\"docmd-search-results\" class=\"docmd-search-results\">\n                <!-- Results injected here -->\n            </div>\n            <div class=\"docmd-search-footer\">\n                <span><kbd class=\"docmd-kbd\">↑</kbd> <kbd class=\"docmd-kbd\">↓</kbd> to navigate</span>\n                <span><kbd class=\"docmd-kbd\">ESC</kbd> to close</span>\n            </div>\n        </div>\n    </div>\n    <% } %>\n\n    <script>\n      window.DOCMD_ROOT = \"<%= relativePathToRoot %>\";\n    </script>\n\n    <script src=\"<%= relativePathToRoot %>assets/js/docmd-main.js\"></script>\n\n    <% if (config.search !== false) { %>\n    <!-- Search Scripts -->\n    <script src=\"<%= relativePathToRoot %>assets/js/minisearch.js\"></script>\n    <script src=\"<%= relativePathToRoot %>assets/js/docmd-search.js\"></script>\n    <% } %>\n\n    <!-- Mermaid.js for diagram rendering -->\n    <script src=\"<%= relativePathToRoot %>assets/js/mermaid.min.js\"></script>\n    <script src=\"<%= relativePathToRoot %>assets/js/docmd-mermaid.js\"></script>\n\n    <% (customJsFiles || []).forEach(jsFile => { %>\n      <script src=\"<%= relativePathToRoot %><%- jsFile.startsWith('/') ? jsFile.substring(1) : jsFile %>\"></script>\n    <% }); %>\n\n    <%- pluginBodyScriptsHtml || '' %>\n    \n    <% if (sponsor && sponsor.enabled) { %>\n    <div class=\"sponsor-ribbon\">\n        <a href=\"<%= sponsor.link %>\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"sponsor-link\">\n            <%- renderIcon('heart', { class: 'sponsor-icon' }) %>\n            <span class=\"sponsor-text\"><%= sponsor.title %></span>\n        </a>\n    </div>\n    <% } %>\n</body>\n</html>",
  "navigation.ejs": "<%# navigation.ejs - Renders the sidebar navigation %>\n<nav class=\"sidebar-nav\" aria-label=\"Main navigation\">\n  <ul>\n    <%\n      // Helper: Normalize paths for comparison\n      function normalizePath(p) {\n        if (!p) return '#';\n        let path = p.replace(/\\\\/g, '/');\n        \n        // Strip leading ./ if present\n        if (path.startsWith('./')) {\n            path = path.substring(2);\n        }\n\n        // Handle file extensions\n        if (path.endsWith('index.md')) {\n          path = path.slice(0, -'index.md'.length);\n        } else {\n          path = path.replace(/\\.md$/, '');\n        }\n\n        // Ensure leading slash\n        if (!path.startsWith('/')) path = '/' + path;\n\n        // Ensure trailing slash\n        if (path.length > 1 && !path.endsWith('/')) {\n          path += '/';\n        }\n        \n        // Handle root\n        if (path === '') path = '/';\n        \n        return path;\n      }\n\n      // Helper: Recursively check if an item contains the active page\n      function hasActiveChild(item, currentPagePath) {\n        if (!item.children || !Array.isArray(item.children)) return false;\n        return item.children.some(child => {\n          if (!child.path || child.external) return false;\n          const childPath = normalizePath(child.path);\n          \n          if (currentPagePath === childPath) return true;\n          \n          return hasActiveChild(child, currentPagePath);\n        });\n      }\n\n      // Recursive function to render navigation items\n      function renderNav(items) {\n        if (!items || !Array.isArray(items)) return;\n        \n        items.forEach(item => {\n          const isExternal = item.external || false;\n          let itemPath = item.path || '#';\n          const normalizedItemPath = isExternal ? itemPath : normalizePath(itemPath);\n\n          // 1. Determine State\n          const isActive = !isExternal && currentPagePath === normalizedItemPath;\n          const isParentOfActive = !isActive && hasActiveChild(item, currentPagePath);\n          const isCollapsible = item.children && item.collapsible;\n          \n          // 2. Open State (Server-Side Calculation)\n          const shouldBeOpen = isParentOfActive || (isActive && item.children && item.children.length > 0);\n\n          // 3. Build Attributes String\n          const liClasses = [];\n          if (isActive) liClasses.push('active');\n          if (isParentOfActive) liClasses.push('active-parent');\n          if (isCollapsible) liClasses.push('collapsible');\n          \n          let liAttributes = `class=\"${liClasses.join(' ')}\"`;\n          if (isCollapsible) {\n              liAttributes += ` data-nav-id=\"${item.path}\"`;\n              if (shouldBeOpen) {\n                  liAttributes += ` aria-expanded=\"true\"`;\n              }\n          }\n\n          // 4. Build Link URL\n          let finalHref = item.path;\n          \n          if (!isExternal) {\n             if (!itemPath || itemPath === '#') {\n                 finalHref = '#';\n             } else {\n                 let cleanPath = item.path;\n                 if (cleanPath.startsWith('/')) cleanPath = cleanPath.substring(1);\n                 \n                 finalHref = relativePathToRoot + cleanPath;\n\n                 const offline = (typeof locals !== 'undefined' && locals.isOfflineMode) === true;\n\n                 if (offline) {\n                     // Offline Mode Logic\n                     if (finalHref.endsWith('/')) {\n                         finalHref += 'index.html';\n                     } else if (finalHref === './') {\n                         finalHref = './index.html';\n                     } else if (!finalHref.includes('#')) {\n                         // FIX: Check only the last segment for a dot (extension)\n                         // e.g. \"../../guide\" -> last segment \"guide\" (no dot) -> add index.html\n                         // e.g. \"../../guide.html\" -> last segment \"guide.html\" (has dot) -> skip\n                         \n                         const parts = finalHref.split('?')[0].split('/'); // Remove query, split by slash\n                         const lastSegment = parts[parts.length - 1];\n                         \n                         if (!lastSegment.includes('.')) {\n                             finalHref += '/index.html';\n                         }\n                     }\n                 } else {\n                     // Clean URL Mode\n                     if (finalHref.endsWith('/index.html')) {\n                         finalHref = finalHref.substring(0, finalHref.length - 10);\n                     }\n                 }\n             }\n          }\n    %>\n    <li <%- liAttributes %>>\n      <a href=\"<%- finalHref %>\" class=\"<%- isActive ? 'active' : '' %>\" <%- isExternal ? 'target=\"_blank\" rel=\"noopener\"' : '' %>>\n        <% if (item.icon) { %> <%- renderIcon(item.icon) %> <% } %>\n        <span class=\"nav-item-title\"><%= item.title %></span>\n        <% if (isCollapsible) { %> <%- renderIcon('chevron-right', { class: 'collapse-icon' }) %> <% } %>\n        <% if (isExternal) { %> <%- renderIcon('external-link', { class: 'nav-external-icon' }) %> <% } %>\n      </a>\n      <% if (item.children) { %>\n        <ul class=\"submenu\" style=\"display: <%= (isCollapsible && shouldBeOpen) ? 'block' : 'none' %>;\">\n          <% renderNav(item.children); %>\n        </ul>\n      <% } %>\n    </li>\n    <%\n        });\n      }\n      renderNav(navItems);\n    %>\n  </ul>\n</nav>",
  "no-style.ejs": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <% if (frontmatter.components?.meta !== false) { %>\n        <%- metaTagsHtml || '' %>\n        <title><%= pageTitle %><% if (frontmatter.components?.siteTitle !== false) { %> | <%= siteTitle %><% } %></title>\n        <% if (description && !(metaTagsHtml && metaTagsHtml.includes('name=\"description\"'))) { %>\n            <meta name=\"description\" content=\"<%= description %>\">\n        <% } %>\n    <% } %>\n\n    <% if (frontmatter.components?.favicon !== false) { %>\n        <%- faviconLinkHtml || '' %>\n    <% } %>\n\n    <% if (frontmatter.components?.themeMode !== false) { %>\n        <script>window.DOCMD_DEFAULT_MODE = \"<%= defaultMode %>\";</script>\n    <% } %>\n\n    <% if (frontmatter.components?.css !== false) { %>\n        <link rel=\"stylesheet\" href=\"<%= relativePathToRoot %>assets/css/docmd-main.css\">\n        <% if (frontmatter.components?.highlight !== false) { %>\n            <link rel=\"stylesheet\" href=\"<%= relativePathToRoot %>assets/css/docmd-highlight-<%= defaultMode === 'dark' ? 'dark' : 'light' %>.css\" id=\"highlight-theme\">\n        <% } %>\n    <% } %>\n\n    <% if (frontmatter.components?.themeMode !== false) { %>\n        <%- themeInitScript %>\n    <% } %>\n\n    <% if (frontmatter.components?.theme !== false) { %>\n        <%- themeCssLinkHtml || '' %>\n    <% } %>\n\n    <% if (frontmatter.components?.customCss !== false && customCssFiles && customCssFiles.length > 0) { %>\n        <% customCssFiles.forEach(cssFile => { %>\n            <link rel=\"stylesheet\" href=\"<%= relativePathToRoot %><%- cssFile.startsWith('/') ? cssFile.substring(1) : cssFile %>\">\n        <% }); %>\n    <% } %>\n\n    <% if (frontmatter.components?.pluginStyles !== false) { %>\n        <%- pluginStylesHtml || '' %>\n    <% } %>\n\n    <% if (frontmatter.components?.pluginHeadScripts !== false) { %>\n        <%- pluginHeadScriptsHtml || '' %>\n    <% } %>\n    \n    <% if (frontmatter.customHead) { %>\n        <%- frontmatter.customHead %>\n    <% } %>\n</head>\n<body\n    <%\n    if (frontmatter.components?.theme !== false) {\n        %> data-theme=\"<%= defaultMode %>\"<%\n    }\n    %><%\n    if (frontmatter.bodyClass) {\n        %> class=\"<%= frontmatter.bodyClass %>\"<%\n    }\n    %> data-copy-code-enabled=\"<%= config.copyCode === true %>\">\n    <% if (frontmatter.components?.layout === true || frontmatter.components?.layout === 'full') { %>\n        <div class=\"main-content-wrapper\">\n            <% if (frontmatter.components?.header !== false) { %>\n                <header class=\"page-header\">\n                    <% if (frontmatter.components?.pageTitle !== false) { %>\n                        <h1><%= pageTitle %></h1>\n                    <% } %>\n                </header>\n            <% } %>\n            <main class=\"content-area\">\n                <div class=\"content-layout\">\n                    <div class=\"main-content\">\n                        <%- content %>\n                    </div>\n                </div>\n            </main>\n            <% if (frontmatter.components?.footer !== false) { %>\n                <footer class=\"page-footer\">\n                    <div class=\"footer-content\">\n                        <div class=\"user-footer\">\n                            <%- footerHtml || '' %>\n                        </div>\n                        <% if (frontmatter.components?.branding !== false) { %>\n                            <div class=\"branding-footer\">\n                                Build with <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"></path><path d=\"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66\"></path><path d=\"m18 15-2-2\"></path><path d=\"m15 18-2-2\"></path></svg> <a href=\"https://docmd.mgks.dev\" target=\"_blank\" rel=\"noopener\">docmd.</a>\n                            </div>\n                        <% } %>\n                    </div>\n                </footer>\n            <% } %>\n        </div>\n    <% } else if (frontmatter.components?.sidebar === true) { %>\n        <aside class=\"sidebar\">\n            <% if (frontmatter.components?.logo !== false && logo && logo.light && logo.dark) { %>\n                <div class=\"sidebar-header\">\n                    <a href=\"<%= logo.href || (relativePathToRoot + 'index.html') %>\" class=\"logo-link\">\n                        <img src=\"<%= relativePathToRoot %><%- logo.light.startsWith('/') ? logo.light.substring(1) : logo.light %>\" alt=\"<%= logo.alt || siteTitle %>\" class=\"logo-light\" <% if (logo.height) { %>style=\"height: <%= logo.height %>;\"<% } %>>\n                        <img src=\"<%= relativePathToRoot %><%- logo.dark.startsWith('/') ? logo.dark.substring(1) : logo.dark %>\" alt=\"<%= logo.alt || siteTitle %>\" class=\"logo-dark\" <% if (logo.height) { %>style=\"height: <%= logo.height %>;\"<% } %>>\n                    </a>\n                </div>\n            <% } %>\n            <% if (frontmatter.components?.navigation !== false) { %>\n                <%- navigationHtml %>\n            <% } %>\n            <% if (frontmatter.components?.themeToggle !== false && theme && theme.enableModeToggle) { %>\n                <button id=\"theme-toggle-button\" aria-label=\"Toggle theme\" class=\"theme-toggle-button\">\n                    <%- renderIcon('sun', { class: 'icon-sun' }) %>\n                    <%- renderIcon('moon', { class: 'icon-moon' }) %>\n                </button>\n            <% } %>\n        </aside>\n        <div class=\"main-content-wrapper\">\n            <% if (frontmatter.components?.header !== false) { %>\n                <header class=\"page-header\">\n                    <% if (frontmatter.components?.pageTitle !== false) { %>\n                        <h1><%= pageTitle %></h1>\n                    <% } %>\n                </header>\n            <% } %>\n            <main class=\"content-area\">\n                <div class=\"content-layout\">\n                    <div class=\"main-content\">\n                        <%- content %>\n                    </div>\n                    <% if (frontmatter.components?.toc !== false && headings && headings.length > 0) { %>\n                        <div class=\"toc-sidebar\">\n                            <%- include('toc', { content, headings, navigationHtml, isActivePage }) %>\n                        </div>\n                    <% } %>\n                </div>\n            </main>\n            <% if (frontmatter.components?.footer !== false) { %>\n                <footer class=\"page-footer\">\n                    <div class=\"footer-content\">\n                        <div class=\"user-footer\">\n                            <%- footerHtml || '' %>\n                        </div>\n                        <% if (frontmatter.components?.branding !== false) { %>\n                            <div class=\"branding-footer\">\n                                Build with <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\"></path><path d=\"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66\"></path><path d=\"m18 15-2-2\"></path><path d=\"m15 18-2-2\"></path></svg> <a href=\"https://docmd.mgks.dev\" target=\"_blank\" rel=\"noopener\">docmd.</a>\n                            </div>\n                        <% } %>\n                    </div>\n                </footer>\n            <% } %>\n        </div>\n    <% } else { %>\n        <%- content %>\n    <% } %>\n\n    <% if (frontmatter.components?.scripts === true) { %>\n        <% if (frontmatter.components?.mainScripts === true) { %>\n            <script src=\"<%= relativePathToRoot %>assets/js/docmd-main.js\"></script>\n        <% } %>\n        \n        <% if (frontmatter.components?.lightbox === true && frontmatter.components?.mainScripts === true) { %>\n            <script src=\"<%= relativePathToRoot %>assets/js/docmd-image-lightbox.js\"></script>\n        <% } %>\n        \n        <% if (frontmatter.components?.customJs === true && customJsFiles && customJsFiles.length > 0) { %>\n            <% customJsFiles.forEach(jsFile => { %>\n                <script src=\"<%= relativePathToRoot %><%- jsFile.startsWith('/') ? jsFile.substring(1) : jsFile %>\"></script>\n            <% }); %>\n        <% } %>\n        \n        <% if (frontmatter.components?.pluginBodyScripts === true) { %>\n            <%- pluginBodyScriptsHtml || '' %>\n        <% } %>\n    <% } %>\n    \n    <% if (frontmatter.customScripts) { %>\n        <%- frontmatter.customScripts %>\n    <% } %>\n</body>\n</html> ",
  "toc.ejs": "<%# src/templates/toc.ejs %>\n<% \n// Helper function to decode HTML entities\nfunction decodeHtmlEntities(html) {\n  return html\n    .replace(/&amp;/g, '&')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&quot;/g, '\"')\n    .replace(/&#39;/g, \"'\")\n    .replace(/&nbsp;/g, ' ');\n}\n\n// Use the isActivePage flag if provided, otherwise fall back to checking navigationHtml\nconst shouldShowToc = typeof isActivePage !== 'undefined' ? isActivePage : \n                      (typeof navigationHtml !== 'undefined' && navigationHtml && navigationHtml.includes('class=\"active\"'));\n\nif (shouldShowToc && !frontmatter?.toc || frontmatter?.toc !== 'false') {\n  // If direct headings aren't available, we'll try to extract them from the content\n  let tocHeadings = [];\n  if (headings && headings.length > 0) {\n    // Use provided headings if available\n    tocHeadings = headings.filter(h => h.level >= 2 && h.level <= 4);\n  } else if (content) {\n    // Basic regex to extract headings from HTML content\n    const headingRegex = /<h([2-4])[^>]*?(?:id=\"([^\"]*)\")?[^>]*?>([\\s\\S]*?)<\\/h\\1>/g;\n    let match;\n    let contentStr = content.toString();\n    \n    while ((match = headingRegex.exec(contentStr)) !== null) {\n      const level = parseInt(match[1], 10);\n      // Use ID if available, or generate one from the text\n      let id = match[2];\n      // Remove any HTML tags inside the heading text\n      const textWithTags = match[3].replace(/<\\/?[^>]+(>|$)/g, '');\n      // Decode HTML entities\n      const text = decodeHtmlEntities(textWithTags);\n      \n      if (!id) {\n        // Generate an ID from the heading text if none exists\n        id = text\n          .toLowerCase()\n          .replace(/\\s+/g, '-')\n          .replace(/[^\\w-]/g, '')\n          .replace(/--+/g, '-')\n          .replace(/^-+|-+$/g, '');\n      }\n      \n      tocHeadings.push({ id, level, text });\n    }\n  }\n\n  // Only show TOC if there are enough headings\n  if (tocHeadings.length > 1) { \n%>\n  <div class=\"toc-container\">\n    <h2 class=\"toc-title\">On This Page<span class=\"mobile-view toc-menu-button float-right\"><%- renderIcon(\"chevrons-down-up\") %></span></h2>\n    <ul class=\"toc-list\">\n      <% tocHeadings.forEach(heading => { %>\n        <li class=\"toc-item toc-level-<%= heading.level %>\">\n          <a href=\"#<%= heading.id %>\" class=\"toc-link\"><%- heading.text %></a>\n        </li>\n      <% }); %>\n    </ul>\n  </div>\n<% } \n} %> "
};
if (typeof globalThis !== 'undefined') globalThis.__DOCMD_TEMPLATES__ = templates;
module.exports = templates;
